^D+ ORIG_REPO=/Users/bpolania/Documents/GitHub/brok-clu-demo
+ ORIG_TARBALL_SHA256=7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
+ echo ========================================
========================================
+ echo 'SCENARIO 03 — Repo copy'
SCENARIO 03 — Repo copy
+ echo ========================================
========================================
+ echo ''

+ echo '--- Common Header ---'
--- Common Header ---
++ date -u +%Y-%m-%dT%H:%M:%SZ
+ echo 'UTC Time: 2026-01-07T17:41:38Z'
UTC Time: 2026-01-07T17:41:38Z
++ cd /Users/bpolania/Documents/GitHub/brok-clu-demo
++ git rev-parse --show-toplevel
+ echo 'Original repo root (git rev-parse): /Users/bpolania/Documents/GitHub/brok-clu-demo'
Original repo root (git rev-parse): /Users/bpolania/Documents/GitHub/brok-clu-demo
+ echo 'Original tarball SHA-256: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a'
Original tarball SHA-256: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
+ echo ''

+ COPIED_REPO=/tmp/phase_v2_6_repo_copy_test
+ rm -rf /tmp/phase_v2_6_repo_copy_test
+ echo '--- Copy repo to temp location ---'
--- Copy repo to temp location ---
+ cp -a /Users/bpolania/Documents/GitHub/brok-clu-demo /tmp/phase_v2_6_repo_copy_test
+ echo 'Copied to: /tmp/phase_v2_6_repo_copy_test'
Copied to: /tmp/phase_v2_6_repo_copy_test
+ echo ''

+ cd /tmp/phase_v2_6_repo_copy_test
++ pwd
+ echo 'PWD: /tmp/phase_v2_6_repo_copy_test'
PWD: /tmp/phase_v2_6_repo_copy_test
+ echo ''

+ echo '--- Copied repo root (git rev-parse) ---'
--- Copied repo root (git rev-parse) ---
+ git rev-parse --show-toplevel
/private/tmp/phase_v2_6_repo_copy_test
+ echo ''

+ echo '--- Vendored tarball SHA-256 in copied repo ---'
--- Vendored tarball SHA-256 in copied repo ---
+ shasum -a 256 /tmp/phase_v2_6_repo_copy_test/vendor/poc_v2/poc_v2.tar.gz
7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a  /tmp/phase_v2_6_repo_copy_test/vendor/poc_v2/poc_v2.tar.gz
++ shasum -a 256 /tmp/phase_v2_6_repo_copy_test/vendor/poc_v2/poc_v2.tar.gz
++ cut '-d ' -f1
+ COPIED_SHA256=7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
+ echo 'Copied tarball SHA-256: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a'
Copied tarball SHA-256: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
+ echo 'Original tarball SHA-256: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a'
Original tarball SHA-256: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
+ '[' 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a = 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a ']'
+ echo 'SHA-256 comparison: MATCH'
SHA-256 comparison: MATCH
+ echo ''

+ echo '--- Single-run in copied repo ---'
--- Single-run in copied repo ---
+ echo 'Input argument form: absolute path'
Input argument form: absolute path
+ echo 'Resolved input path: /tmp/phase_v2_6_repo_copy_test/examples/inputs/accept_restart_alpha_1.txt'
Resolved input path: /tmp/phase_v2_6_repo_copy_test/examples/inputs/accept_restart_alpha_1.txt
+ echo 'Command: /tmp/phase_v2_6_repo_copy_test/scripts/run_poc_v2.sh --input /tmp/phase_v2_6_repo_copy_test/examples/inputs/accept_restart_alpha_1.txt'
Command: /tmp/phase_v2_6_repo_copy_test/scripts/run_poc_v2.sh --input /tmp/phase_v2_6_repo_copy_test/examples/inputs/accept_restart_alpha_1.txt
+ /tmp/phase_v2_6_repo_copy_test/scripts/run_poc_v2.sh --input /tmp/phase_v2_6_repo_copy_test/examples/inputs/accept_restart_alpha_1.txt
run_directory: /tmp/phase_v2_6_repo_copy_test/artifacts/run/run_20260107T174140Z
verification: invoking /tmp/phase_v2_6_repo_copy_test/scripts/verify_poc_v2.sh
verification: exit_code=0
execution: running bundle verify to set internal state
execution: run_entrypoint=scripts/run.sh
execution: invoking with input=/tmp/phase_v2_6_repo_copy_test/examples/inputs/accept_restart_alpha_1.txt
execution: exit_code=0
+ RUN_EXIT=0
+ echo 'Exit code: 0'
Exit code: 0
+ echo ''

+ echo '--- Determinism in copied repo (3 runs) ---'
--- Determinism in copied repo (3 runs) ---
+ echo 'Command: /tmp/phase_v2_6_repo_copy_test/scripts/determinism_test_v2.sh --input /tmp/phase_v2_6_repo_copy_test/examples/inputs/accept_restart_alpha_1.txt --runs 3'
Command: /tmp/phase_v2_6_repo_copy_test/scripts/determinism_test_v2.sh --input /tmp/phase_v2_6_repo_copy_test/examples/inputs/accept_restart_alpha_1.txt --runs 3
+ /tmp/phase_v2_6_repo_copy_test/scripts/determinism_test_v2.sh --input /tmp/phase_v2_6_repo_copy_test/examples/inputs/accept_restart_alpha_1.txt --runs 3
determinism_test: directory=/tmp/phase_v2_6_repo_copy_test/artifacts/determinism/test_20260107T174142Z
determinism_test: input=/tmp/phase_v2_6_repo_copy_test/examples/inputs/accept_restart_alpha_1.txt
determinism_test: runs=3

determinism_test: run 1 of 3
determinism_test: run 1 completed (exit_code=0)
determinism_test: baseline set from run 1

determinism_test: run 2 of 3
determinism_test: run 2 completed (exit_code=0)

determinism_test: run 3 of 3
determinism_test: run 3 completed (exit_code=0)

determinism_test: PASS (all 3 runs identical)
+ DET_EXIT=0
+ echo 'Exit code: 0'
Exit code: 0
+ echo ''

+ echo '--- Copied repo artifacts (run) ---'
--- Copied repo artifacts (run) ---
+ ls -lt /tmp/phase_v2_6_repo_copy_test/artifacts/run
+ head -n 10
total 0
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:41 run_20260107T174146Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:41 run_20260107T174144Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:41 run_20260107T174142Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:41 run_20260107T174140Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:41 run_20260107T174136Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:41 run_20260107T174134Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:41 run_20260107T174132Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:41 run_20260107T174130Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:41 run_20260107T174128Z
+ echo ''

+ echo '--- Copied repo artifacts (determinism) ---'
--- Copied repo artifacts (determinism) ---
+ ls -lt /tmp/phase_v2_6_repo_copy_test/artifacts/determinism
+ head -n 5
total 0
drwxr-xr-x@  8 bpolania  staff  256 Jan  7 11:41 test_20260107T174142Z
drwxr-xr-x@  8 bpolania  staff  256 Jan  7 11:41 test_20260107T174132Z
drwxr-xr-x@ 10 bpolania  staff  320 Jan  7 11:41 test_20260107T174118Z
drwxr-xr-x@  8 bpolania  staff  256 Jan  7 11:34 test_20260107T173449Z
++ ls -t /tmp/phase_v2_6_repo_copy_test/artifacts/determinism
++ head -n 1
+ LATEST_DET=test_20260107T174142Z
+ echo ''

+ echo 'Latest determinism result:'
Latest determinism result:
+ cat /tmp/phase_v2_6_repo_copy_test/artifacts/determinism/test_20260107T174142Z/result.txt
PASS: All 3 runs produced identical stdout.raw.kv
+ echo ''

+ echo '--- Cleanup copied repo ---'
--- Cleanup copied repo ---
+ rm -rf /tmp/phase_v2_6_repo_copy_test
+ echo 'Removed: /tmp/phase_v2_6_repo_copy_test'
Removed: /tmp/phase_v2_6_repo_copy_test
+ echo ''

+ echo ========================================
========================================
+ echo 'SCENARIO 03 COMPLETE'
SCENARIO 03 COMPLETE
+ echo 'run_poc_v2.sh exit code: 0'
run_poc_v2.sh exit code: 0
+ echo 'determinism_test_v2.sh exit code: 0'
determinism_test_v2.sh exit code: 0
+ echo ========================================
========================================
+ exit 0
