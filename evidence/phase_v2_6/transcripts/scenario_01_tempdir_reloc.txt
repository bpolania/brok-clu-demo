^D+ REPO_ROOT=/Users/bpolania/Documents/GitHub/brok-clu-demo
+ echo ========================================
========================================
+ echo 'SCENARIO 01 — Temp directory relocation'
SCENARIO 01 — Temp directory relocation
+ echo ========================================
========================================
+ echo ''

+ echo '--- Common Header ---'
--- Common Header ---
++ date -u +%Y-%m-%dT%H:%M:%SZ
+ echo 'UTC Time: 2026-01-07T17:41:16Z'
UTC Time: 2026-01-07T17:41:16Z
++ pwd
+ echo 'PWD: /Users/bpolania/Documents/GitHub/brok-clu-demo'
PWD: /Users/bpolania/Documents/GitHub/brok-clu-demo
++ cd /Users/bpolania/Documents/GitHub/brok-clu-demo
++ git rev-parse --show-toplevel
+ echo 'Repo root (git rev-parse): /Users/bpolania/Documents/GitHub/brok-clu-demo'
Repo root (git rev-parse): /Users/bpolania/Documents/GitHub/brok-clu-demo
+ echo ''

+ echo '--- Vendored tarball SHA-256 ---'
--- Vendored tarball SHA-256 ---
+ shasum -a 256 /Users/bpolania/Documents/GitHub/brok-clu-demo/vendor/poc_v2/poc_v2.tar.gz
7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a  /Users/bpolania/Documents/GitHub/brok-clu-demo/vendor/poc_v2/poc_v2.tar.gz
+ echo ''

+ echo '--- Input path information ---'
--- Input path information ---
+ echo 'Input argument form: examples/inputs/accept_restart_alpha_1.txt (relative)'
Input argument form: examples/inputs/accept_restart_alpha_1.txt (relative)
+ echo 'Resolved input path: /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt'
Resolved input path: /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
+ echo ''

+ echo '--- Extraction directory mtime BEFORE run ---'
--- Extraction directory mtime BEFORE run ---
+ ls -la /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/exec_bundle
total 0
drwxr-xr-x@ 2 bpolania  staff   64 Jan  7 11:34 .
drwxr-xr-x@ 8 bpolania  staff  256 Jan  7 10:37 ..
++ stat -f %m /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/exec_bundle
+ E_BEFORE=1767807295
+ echo exec_bundle_mtime_epoch_before=1767807295
exec_bundle_mtime_epoch_before=1767807295
+ '[' 1767807295 '!=' NA ']'
++ date -u -r 1767807295 +%Y-%m-%dT%H:%M:%SZ
+ echo exec_bundle_mtime_utc_before=2026-01-07T17:34:55Z
exec_bundle_mtime_utc_before=2026-01-07T17:34:55Z
+ echo ''

+ echo '--- Single-run execution ---'
--- Single-run execution ---
+ echo 'Command: /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/run_poc_v2.sh --input /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt'
Command: /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/run_poc_v2.sh --input /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
+ /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/run_poc_v2.sh --input /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
run_directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T174116Z
verification: invoking /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/verify_poc_v2.sh
verification: exit_code=0
execution: running bundle verify to set internal state
execution: run_entrypoint=scripts/run.sh
execution: invoking with input=/Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
execution: exit_code=0
+ RUN_EXIT=0
+ echo 'Exit code: 0'
Exit code: 0
+ echo ''

+ echo '--- Extraction directory mtime AFTER run ---'
--- Extraction directory mtime AFTER run ---
+ ls -la /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/exec_bundle
total 0
drwxr-xr-x@ 2 bpolania  staff   64 Jan  7 11:41 .
drwxr-xr-x@ 8 bpolania  staff  256 Jan  7 10:37 ..
++ stat -f %m /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/exec_bundle
+ E_AFTER=1767807678
+ echo exec_bundle_mtime_epoch_after=1767807678
exec_bundle_mtime_epoch_after=1767807678
+ '[' 1767807678 '!=' NA ']'
++ date -u -r 1767807678 +%Y-%m-%dT%H:%M:%SZ
+ echo exec_bundle_mtime_utc_after=2026-01-07T17:41:18Z
exec_bundle_mtime_utc_after=2026-01-07T17:41:18Z
+ echo ''

+ echo '--- Latest run directory ---'
--- Latest run directory ---
+ ls -lt /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run
+ head -n 5
total 0
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:41 run_20260107T174116Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:34 run_20260107T173453Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:34 run_20260107T173451Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 11:34 run_20260107T173449Z
++ ls -t /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run
++ head -n 1
+ LATEST_RUN=run_20260107T174116Z
+ LATEST_RUN_DIR=/Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T174116Z
+ echo ''

+ echo 'Latest run directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T174116Z'
Latest run directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T174116Z
+ echo ''

+ echo '--- Contents of latest run directory ---'
--- Contents of latest run directory ---
+ ls -la /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T174116Z
total 40
drwxr-xr-x@  9 bpolania  staff   288 Jan  7 11:41 .
drwxr-xr-x@ 44 bpolania  staff  1408 Jan  7 11:41 ..
-rw-r--r--@  1 bpolania  staff   508 Jan  7 11:41 DERIVED_VIEW_NOTICE.txt
-rw-r--r--@  1 bpolania  staff   382 Jan  7 11:41 execution.meta.json
-rw-r--r--@  1 bpolania  staff     2 Jan  7 11:41 exit_code.txt
-rw-r--r--@  1 bpolania  staff     0 Jan  7 11:41 stderr.raw.txt
-rw-r--r--@  1 bpolania  staff  1970 Jan  7 11:41 stdout.derived.json
-rw-r--r--@  1 bpolania  staff   593 Jan  7 11:41 stdout.raw.kv
drwxr-xr-x@  5 bpolania  staff   160 Jan  7 11:41 verify
+ echo ''

+ echo '--- execution.meta.json ---'
--- execution.meta.json ---
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T174116Z/execution.meta.json
{
  "run_dir": "/Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T174116Z",
  "created_at_utc": "2026-01-07T17:41:16Z",
  "verification_passed": true,
  "execution_attempted": true,
  "exit_code": 0,
  "stdout_path": "stdout.raw.kv",
  "stderr_path": "stderr.raw.txt",
  "derived_stdout_json_path": "stdout.derived.json",
  "notes": "Execution completed."
}
+ echo ''

+ echo '--- Check for bundle directories in run directory ---'
--- Check for bundle directories in run directory ---
+ echo 'Searching for: bundle_root, exec_bundle, poc_v2'
Searching for: bundle_root, exec_bundle, poc_v2
+ find /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T174116Z -maxdepth 4 -type d '(' -name bundle_root -o -name exec_bundle -o -name poc_v2 ')'
+ echo ''

+ echo '--- Determinism test (5 runs) ---'
--- Determinism test (5 runs) ---
+ echo 'Command: /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/determinism_test_v2.sh --input /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt --runs 5'
Command: /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/determinism_test_v2.sh --input /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt --runs 5
+ /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/determinism_test_v2.sh --input /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt --runs 5
determinism_test: directory=/Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T174118Z
determinism_test: input=/Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
determinism_test: runs=5

determinism_test: run 1 of 5
determinism_test: run 1 completed (exit_code=0)
determinism_test: baseline set from run 1

determinism_test: run 2 of 5
determinism_test: run 2 completed (exit_code=0)

determinism_test: run 3 of 5
determinism_test: run 3 completed (exit_code=0)

determinism_test: run 4 of 5
determinism_test: run 4 completed (exit_code=0)

determinism_test: run 5 of 5
determinism_test: run 5 completed (exit_code=0)

determinism_test: PASS (all 5 runs identical)
+ DET_EXIT=0
+ echo 'Exit code: 0'
Exit code: 0
+ echo ''

+ echo '--- Determinism comparison method evidence ---'
--- Determinism comparison method evidence ---
+ echo 'File: scripts/determinism_test_v2.sh, line 265:'
File: scripts/determinism_test_v2.sh, line 265:
+ nl -ba /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/determinism_test_v2.sh
+ sed -n 265p
   265	        if ! cmp -s "$BASELINE_FILE" "$RUN_SUBDIR/stdout.raw.kv"; then
+ echo ''

+ echo '--- Latest determinism test directory ---'
--- Latest determinism test directory ---
++ ls -t /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism
++ head -n 1
+ LATEST_DET=test_20260107T174118Z
+ echo 'Latest: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T174118Z'
Latest: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T174118Z
+ ls -la /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T174118Z
total 16
drwxr-xr-x@ 10 bpolania  staff   320 Jan  7 11:41 .
drwxr-xr-x@  9 bpolania  staff   288 Jan  7 11:41 ..
drwxr-xr-x@  4 bpolania  staff   128 Jan  7 11:41 baseline
-rw-r--r--@  1 bpolania  staff    50 Jan  7 11:41 result.txt
drwxr-xr-x@  8 bpolania  staff   256 Jan  7 11:41 run_001
drwxr-xr-x@  8 bpolania  staff   256 Jan  7 11:41 run_002
drwxr-xr-x@  8 bpolania  staff   256 Jan  7 11:41 run_003
drwxr-xr-x@  8 bpolania  staff   256 Jan  7 11:41 run_004
drwxr-xr-x@  8 bpolania  staff   256 Jan  7 11:41 run_005
-rw-r--r--@  1 bpolania  staff  1129 Jan  7 11:41 summary.txt
+ echo ''

+ echo '--- Determinism result.txt ---'
--- Determinism result.txt ---
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T174118Z/result.txt
PASS: All 5 runs produced identical stdout.raw.kv
+ echo ''

+ echo ========================================
========================================
+ echo 'SCENARIO 01 COMPLETE'
SCENARIO 01 COMPLETE
+ echo 'run_poc_v2.sh exit code: 0'
run_poc_v2.sh exit code: 0
+ echo 'determinism_test_v2.sh exit code: 0'
determinism_test_v2.sh exit code: 0
+ echo ========================================
========================================
+ exit 0
