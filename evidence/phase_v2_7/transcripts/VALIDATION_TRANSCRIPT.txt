+ echo ==============================================
==============================================
+ echo 'PHASE V2-7 FINAL VALIDATION'
PHASE V2-7 FINAL VALIDATION
+ echo ==============================================
==============================================
+ echo ''

++ date -u +%Y-%m-%dT%H:%M:%SZ
+ echo 'Timestamp: 2026-01-07T18:33:10Z'
Timestamp: 2026-01-07T18:33:10Z
+ echo ''

+ REPO_ROOT=/Users/bpolania/Documents/GitHub/brok-clu-demo
+ cd /Users/bpolania/Documents/GitHub/brok-clu-demo
+ echo ==============================================
==============================================
+ echo 'A) FRESH CLONE SANITY'
A) FRESH CLONE SANITY
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- A.1: Current repo root ---'
--- A.1: Current repo root ---
+ git rev-parse --show-toplevel
/Users/bpolania/Documents/GitHub/brok-clu-demo
+ echo ''

+ echo '--- A.2: Git status (should be clean except phase_v2_7 evidence) ---'
--- A.2: Git status (should be clean except phase_v2_7 evidence) ---
+ git status
On branch main
Your branch is up to date with 'origin/main'.

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	evidence/phase_v2_7/

nothing added to commit but untracked files present (use "git add" to track)
+ echo ''

+ echo '--- A.3: Confirm vendored PoC v2 checksum ---'
--- A.3: Confirm vendored PoC v2 checksum ---
+ echo 'Recorded checksum location: vendor/poc_v2/SHA256SUMS.vendor'
Recorded checksum location: vendor/poc_v2/SHA256SUMS.vendor
+ cat vendor/poc_v2/SHA256SUMS.vendor
7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a  poc_v2.tar.gz
51fec5be8eea6fd1c8d689a5646c86b32e016d670ba20f1b70afe68f0c860f67  PROVENANCE.txt
+ echo ''

+ echo '--- A.4: Compute actual checksum ---'
--- A.4: Compute actual checksum ---
+ shasum -a 256 vendor/poc_v2/poc_v2.tar.gz
7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a  vendor/poc_v2/poc_v2.tar.gz
+ echo ''

+ echo '--- A.5: Verify checksum match ---'
--- A.5: Verify checksum match ---
++ grep poc_v2.tar.gz vendor/poc_v2/SHA256SUMS.vendor
++ cut '-d ' -f1
+ RECORDED=7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
++ shasum -a 256 vendor/poc_v2/poc_v2.tar.gz
++ cut '-d ' -f1
+ ACTUAL=7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
+ echo 'Recorded: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a'
Recorded: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
+ echo 'Actual:   7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a'
Actual:   7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
+ '[' 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a = 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a ']'
+ echo 'CHECKSUM: MATCH'
CHECKSUM: MATCH
+ echo ''

+ echo ==============================================
==============================================
+ echo 'B) VERIFICATION PATH'
B) VERIFICATION PATH
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- B.1: Run wrapper verification ---'
--- B.1: Run wrapper verification ---
+ ./scripts/verify_poc_v2.sh
Tarball SHA-256 verified: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
Extracting to: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183310Z/bundle_root
Bundle root: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183310Z/bundle_root/brok-clu-poc_v2-standalone
Verification entrypoint: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183310Z/bundle_root/brok-clu-poc_v2-standalone/scripts/verify.sh
Invoking PoC v2 verification...

Capture directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/verify/run_20260107T183310Z

VERIFICATION PASSED

PoC v2 Standalone Bundle Verification
======================================

Bundle root: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183310Z/bundle_root/brok-clu-poc_v2-standalone

Checking verification files...
Checking manifest files exist...
Verifying SHA256 checksums...
Checking required runtime files...
Checking executables...
Writing verification outputs...

======================================
VERIFICATION PASSED

Files verified: 19
Status: bundles/verified/verify.status.txt
Log:    bundles/verified/verify.log
======================================
+ VERIFY_EXIT=0
+ echo 'verify_poc_v2.sh exit code: 0'
verify_poc_v2.sh exit code: 0
+ echo ''

+ echo '--- B.2: List verification artifacts ---'
--- B.2: List verification artifacts ---
+ ls -la artifacts/verify/
total 0
drwxr-xr-x@ 64 bpolania  staff  2048 Jan  7 12:33 .
drwxr-xr-x@  8 bpolania  staff   256 Jan  7 10:37 ..
drwxr-xr-x@  6 bpolania  staff   192 Jan  7 00:35 run_20260107T063526Z
drwxr-xr-x@  6 bpolania  staff   192 Jan  7 00:35 run_20260107T063538Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 00:37 run_20260107T063731Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 00:48 run_20260107T064851Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 00:56 run_20260107T065608Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 01:05 run_20260107T070542Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 01:06 run_20260107T070622Z
drwxr-xr-x@  2 bpolania  staff    64 Jan  7 01:14 run_20260107T071407Z
drwxr-xr-x@  6 bpolania  staff   192 Jan  7 01:14 run_20260107T071447Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 01:15 run_20260107T071459Z
drwxr-xr-x@  6 bpolania  staff   192 Jan  7 01:23 run_20260107T072348Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 01:24 run_20260107T072403Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 09:04 run_20260107T150444Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 09:06 run_20260107T150634Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 09:07 run_20260107T150721Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 09:08 run_20260107T150801Z
drwxr-xr-x@  6 bpolania  staff   192 Jan  7 09:08 run_20260107T150854Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 09:42 run_20260107T154228Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 09:50 run_20260107T155023Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 10:09 run_20260107T160930Z
drwxr-xr-x@  6 bpolania  staff   192 Jan  7 10:10 run_20260107T161022Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 10:14 run_20260107T161422Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 10:25 run_20260107T162517Z
drwxr-xr-x@  6 bpolania  staff   192 Jan  7 10:27 run_20260107T162751Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 10:37 run_20260107T163709Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 10:37 run_20260107T163711Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 10:37 run_20260107T163713Z
drwxr-xr-x@  6 bpolania  staff   192 Jan  7 10:37 run_20260107T163745Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:14 run_20260107T171433Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:14 run_20260107T171435Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:14 run_20260107T171438Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:14 run_20260107T171440Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:14 run_20260107T171442Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:14 run_20260107T171444Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:14 run_20260107T171445Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:14 run_20260107T171447Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:14 run_20260107T171449Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:14 run_20260107T171452Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:14 run_20260107T171454Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:34 run_20260107T173432Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:34 run_20260107T173434Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:34 run_20260107T173437Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:34 run_20260107T173439Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:34 run_20260107T173441Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:34 run_20260107T173443Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:34 run_20260107T173445Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:34 run_20260107T173447Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:34 run_20260107T173449Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:34 run_20260107T173451Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:34 run_20260107T173453Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:41 run_20260107T174116Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:41 run_20260107T174118Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:41 run_20260107T174120Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:41 run_20260107T174122Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:41 run_20260107T174124Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:41 run_20260107T174126Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:41 run_20260107T174128Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:41 run_20260107T174130Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:41 run_20260107T174132Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:41 run_20260107T174134Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 11:41 run_20260107T174136Z
drwxr-xr-x@  7 bpolania  staff   224 Jan  7 12:33 run_20260107T183310Z
+ echo ''

+ echo ==============================================
==============================================
+ echo 'C) SINGLE-RUN EXECUTION'
C) SINGLE-RUN EXECUTION
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- C.1: Available input files ---'
--- C.1: Available input files ---
+ ls -la examples/inputs/
total 40
drwxr-xr-x@ 7 bpolania  staff  224 Jan  4 01:53 .
drwxr-xr-x@ 3 bpolania  staff   96 Jan  4 01:51 ..
-rw-------@ 1 bpolania  staff   35 Jan  4 01:53 accept_restart_alpha_1.txt
-rw-------@ 1 bpolania  staff   26 Jan  4 01:53 accept_restart_alpha_2.txt
-rw-------@ 1 bpolania  staff   15 Jan  4 01:53 accept_status_beta.txt
-rw-------@ 1 bpolania  staff   28 Jan  4 01:53 reject_grammar_1.txt
-rw-------@ 1 bpolania  staff   22 Jan  4 01:53 reject_semantic_1.txt
+ echo ''

+ echo '--- C.2: Using input file ---'
--- C.2: Using input file ---
+ INPUT_FILE=/Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
+ echo 'Input: /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt'
Input: /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
restart alpha subsystem gracefully
+ echo ''

+ echo '--- C.3: Run single execution ---'
--- C.3: Run single execution ---
+ ./scripts/run_poc_v2.sh --input /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
run_directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183310Z
verification: invoking /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/verify_poc_v2.sh
verification: exit_code=0
execution: running bundle verify to set internal state
execution: run_entrypoint=scripts/run.sh
execution: invoking with input=/Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
execution: exit_code=0
+ RUN_EXIT=0
+ echo 'run_poc_v2.sh exit code: 0'
run_poc_v2.sh exit code: 0
+ echo ''

+ echo '--- C.4: Latest run directory ---'
--- C.4: Latest run directory ---
++ ls -t artifacts/run
++ head -n 1
+ LATEST_RUN=run_20260107T183310Z
+ LATEST_RUN_DIR=/Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183310Z
+ echo 'Latest run: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183310Z'
Latest run: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183310Z
+ echo ''

+ echo '--- C.5: Run directory contents ---'
--- C.5: Run directory contents ---
+ ls -la /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183310Z
total 40
drwxr-xr-x@  9 bpolania  staff   288 Jan  7 12:33 .
drwxr-xr-x@ 55 bpolania  staff  1760 Jan  7 12:33 ..
-rw-r--r--@  1 bpolania  staff   508 Jan  7 12:33 DERIVED_VIEW_NOTICE.txt
-rw-r--r--@  1 bpolania  staff   382 Jan  7 12:33 execution.meta.json
-rw-r--r--@  1 bpolania  staff     2 Jan  7 12:33 exit_code.txt
-rw-r--r--@  1 bpolania  staff     0 Jan  7 12:33 stderr.raw.txt
-rw-r--r--@  1 bpolania  staff  1970 Jan  7 12:33 stdout.derived.json
-rw-r--r--@  1 bpolania  staff   593 Jan  7 12:33 stdout.raw.kv
drwxr-xr-x@  5 bpolania  staff   160 Jan  7 12:33 verify
+ echo ''

+ echo '--- C.6: Verification occurred first (verify subdirectory) ---'
--- C.6: Verification occurred first (verify subdirectory) ---
+ ls -la /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183310Z/verify/
total 16
drwxr-xr-x@ 5 bpolania  staff   160 Jan  7 12:33 .
drwxr-xr-x@ 9 bpolania  staff   288 Jan  7 12:33 ..
-rw-r--r--@ 1 bpolania  staff     2 Jan  7 12:33 exit_code.txt
-rw-r--r--@ 1 bpolania  staff     0 Jan  7 12:33 stderr.txt
-rw-r--r--@ 1 bpolania  staff  1305 Jan  7 12:33 stdout.txt
+ echo ''

+ echo '--- C.7: exit_code.txt ---'
--- C.7: exit_code.txt ---
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183310Z/exit_code.txt
0
+ echo ''

+ echo ==============================================
==============================================
+ echo 'D) OUTPUT SEMANTICS'
D) OUTPUT SEMANTICS
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- D.1: stdout.raw.kv content ---'
--- D.1: stdout.raw.kv content ---
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183310Z/stdout.raw.kv
PoC v2 Standalone - Run Mode (cmd_interpreter)
===============================================

Input:  /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
Output: artifacts/runs/run_001

Run complete.

Artifacts:
  artifacts/runs/run_001/input.txt
  artifacts/runs/run_001/stdout.raw.kv
  artifacts/runs/run_001/stderr.txt
  artifacts/runs/run_001/exit_code.txt
  artifacts/runs/run_001/output.derived.json

Exit code: 0
===============================================

Authoritative output (key=value):
status=OK
intent_id=14
n_slots=0
dispatch=unknown
+ echo ''

+ echo '--- D.2: DERIVED_VIEW_NOTICE.txt ---'
--- D.2: DERIVED_VIEW_NOTICE.txt ---
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183310Z/DERIVED_VIEW_NOTICE.txt
DERIVED VIEW NOTICE

The file stdout.derived.json is a DERIVED, NON-AUTHORITATIVE view.

- Source: stdout.raw.kv (the single authoritative output)
- Purpose: Convenience parsing only
- Usage restriction: Derived views MUST NOT be used for determinism checks

The authoritative output is always stdout.raw.kv, which contains the exact
bytes emitted by PoC v2 to stdout, in order, without modification.

Any discrepancy between stdout.derived.json and stdout.raw.kv must be
resolved in favor of stdout.raw.kv.
+ echo ''

+ echo '--- D.3: execution.meta.json ---'
--- D.3: execution.meta.json ---
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183310Z/execution.meta.json
{
  "run_dir": "/Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183310Z",
  "created_at_utc": "2026-01-07T18:33:10Z",
  "verification_passed": true,
  "execution_attempted": true,
  "exit_code": 0,
  "stdout_path": "stdout.raw.kv",
  "stderr_path": "stderr.raw.txt",
  "derived_stdout_json_path": "stdout.derived.json",
  "notes": "Execution completed."
}
+ echo ''

+ echo ==============================================
==============================================
+ echo 'E) DETERMINISM VALIDATION'
E) DETERMINISM VALIDATION
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- E.1: Run determinism test (5 runs) ---'
--- E.1: Run determinism test (5 runs) ---
+ ./scripts/determinism_test_v2.sh --input /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt --runs 5
determinism_test: directory=/Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z
determinism_test: input=/Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
determinism_test: runs=5

determinism_test: run 1 of 5
determinism_test: run 1 completed (exit_code=0)
determinism_test: baseline set from run 1

determinism_test: run 2 of 5
determinism_test: run 2 completed (exit_code=0)

determinism_test: run 3 of 5
determinism_test: run 3 completed (exit_code=0)

determinism_test: run 4 of 5
determinism_test: run 4 completed (exit_code=0)

determinism_test: run 5 of 5
determinism_test: run 5 completed (exit_code=0)

determinism_test: PASS (all 5 runs identical)
+ DET_EXIT=0
+ echo 'determinism_test_v2.sh exit code: 0'
determinism_test_v2.sh exit code: 0
+ echo ''

+ echo '--- E.2: Latest determinism test directory ---'
--- E.2: Latest determinism test directory ---
++ ls -t artifacts/determinism
++ head -n 1
+ LATEST_DET=test_20260107T183312Z
+ LATEST_DET_DIR=/Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z
+ echo 'Latest determinism test: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z'
Latest determinism test: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z
+ echo ''

+ echo '--- E.3: Determinism test contents ---'
--- E.3: Determinism test contents ---
+ ls -la /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z
total 16
drwxr-xr-x@ 10 bpolania  staff   320 Jan  7 12:33 .
drwxr-xr-x@ 11 bpolania  staff   352 Jan  7 12:33 ..
drwxr-xr-x@  4 bpolania  staff   128 Jan  7 12:33 baseline
-rw-r--r--@  1 bpolania  staff    50 Jan  7 12:33 result.txt
drwxr-xr-x@  8 bpolania  staff   256 Jan  7 12:33 run_001
drwxr-xr-x@  8 bpolania  staff   256 Jan  7 12:33 run_002
drwxr-xr-x@  8 bpolania  staff   256 Jan  7 12:33 run_003
drwxr-xr-x@  8 bpolania  staff   256 Jan  7 12:33 run_004
drwxr-xr-x@  8 bpolania  staff   256 Jan  7 12:33 run_005
-rw-r--r--@  1 bpolania  staff  1129 Jan  7 12:33 summary.txt
+ echo ''

+ echo '--- E.4: result.txt ---'
--- E.4: result.txt ---
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/result.txt
PASS: All 5 runs produced identical stdout.raw.kv
+ echo ''

+ echo '--- E.5: summary.txt ---'
--- E.5: summary.txt ---
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/summary.txt
Determinism Test Summary
========================
Test directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z
Input file: /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
Run count: 5
Started: 2026-01-07T18:33:12Z

Comparison target: stdout.raw.kv (byte-for-byte, no normalization)
Comparison method: cmp (binary comparison)

Run 001: completed (exit_code=0, sha256=06fbb25336bbee1f3dfef9b7777385785db387b7ef695f25b34bb49aea5a21d3)

Baseline: run_001 (sha256=06fbb25336bbee1f3dfef9b7777385785db387b7ef695f25b34bb49aea5a21d3)

Run 002: completed (exit_code=0, sha256=06fbb25336bbee1f3dfef9b7777385785db387b7ef695f25b34bb49aea5a21d3)
Run 003: completed (exit_code=0, sha256=06fbb25336bbee1f3dfef9b7777385785db387b7ef695f25b34bb49aea5a21d3)
Run 004: completed (exit_code=0, sha256=06fbb25336bbee1f3dfef9b7777385785db387b7ef695f25b34bb49aea5a21d3)
Run 005: completed (exit_code=0, sha256=06fbb25336bbee1f3dfef9b7777385785db387b7ef695f25b34bb49aea5a21d3)

Completed: 2026-01-07T18:33:22Z

RESULT: PASS
All 5 runs produced identical stdout.raw.kv
+ echo ''

+ echo '--- E.6: Byte-for-byte comparison proof ---'
--- E.6: Byte-for-byte comparison proof ---
+ echo 'Comparing all stdout.raw.kv against baseline:'
Comparing all stdout.raw.kv against baseline:
+ for f in '"$LATEST_DET_DIR"/run_*/stdout.raw.kv'
+ cmp -s /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/baseline/stdout.raw.kv /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_001/stdout.raw.kv
+ CMP_EXIT=0
+ echo 'cmp baseline vs /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_001/stdout.raw.kv: exit_code=0'
cmp baseline vs /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_001/stdout.raw.kv: exit_code=0
+ for f in '"$LATEST_DET_DIR"/run_*/stdout.raw.kv'
+ cmp -s /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/baseline/stdout.raw.kv /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_002/stdout.raw.kv
+ CMP_EXIT=0
+ echo 'cmp baseline vs /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_002/stdout.raw.kv: exit_code=0'
cmp baseline vs /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_002/stdout.raw.kv: exit_code=0
+ for f in '"$LATEST_DET_DIR"/run_*/stdout.raw.kv'
+ cmp -s /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/baseline/stdout.raw.kv /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_003/stdout.raw.kv
+ CMP_EXIT=0
+ echo 'cmp baseline vs /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_003/stdout.raw.kv: exit_code=0'
cmp baseline vs /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_003/stdout.raw.kv: exit_code=0
+ for f in '"$LATEST_DET_DIR"/run_*/stdout.raw.kv'
+ cmp -s /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/baseline/stdout.raw.kv /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_004/stdout.raw.kv
+ CMP_EXIT=0
+ echo 'cmp baseline vs /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_004/stdout.raw.kv: exit_code=0'
cmp baseline vs /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_004/stdout.raw.kv: exit_code=0
+ for f in '"$LATEST_DET_DIR"/run_*/stdout.raw.kv'
+ cmp -s /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/baseline/stdout.raw.kv /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_005/stdout.raw.kv
+ CMP_EXIT=0
+ echo 'cmp baseline vs /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_005/stdout.raw.kv: exit_code=0'
cmp baseline vs /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/determinism/test_20260107T183312Z/run_005/stdout.raw.kv: exit_code=0
+ echo ''

+ echo ==============================================
==============================================
+ echo 'F) RELOCATABILITY SPOT CHECK'
F) RELOCATABILITY SPOT CHECK
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- F.1: Invoke from /tmp ---'
--- F.1: Invoke from /tmp ---
+ cd /tmp
++ pwd
+ echo 'PWD: /tmp'
PWD: /tmp
+ /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/run_poc_v2.sh --input /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
run_directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183322Z
verification: invoking /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/verify_poc_v2.sh
verification: exit_code=0
execution: running bundle verify to set internal state
execution: run_entrypoint=scripts/run.sh
execution: invoking with input=/Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
execution: exit_code=0
+ RELOC_EXIT=0
+ echo 'run_poc_v2.sh exit code (from /tmp): 0'
run_poc_v2.sh exit code (from /tmp): 0
+ cd /Users/bpolania/Documents/GitHub/brok-clu-demo
+ echo ''

+ echo '--- F.2: Artifacts still in repo ---'
--- F.2: Artifacts still in repo ---
+ ls -lt artifacts/run
+ head -n 5
total 0
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 12:33 run_20260107T183322Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 12:33 run_20260107T183320Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 12:33 run_20260107T183318Z
drwxr-xr-x@  9 bpolania  staff  288 Jan  7 12:33 run_20260107T183316Z
+ echo ''

+ echo ==============================================
==============================================
+ echo 'G) FAILURE HANDLING'
G) FAILURE HANDLING
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- G.1: Temporarily rename PROVENANCE.txt to induce failure ---'
--- G.1: Temporarily rename PROVENANCE.txt to induce failure ---
+ mv vendor/poc_v2/PROVENANCE.txt vendor/poc_v2/PROVENANCE.txt.bak
+ ls -la vendor/poc_v2/
total 2424
drwxr-xr-x@ 7 bpolania  staff      224 Jan  7 12:33 .
drwxr-xr-x@ 3 bpolania  staff       96 Jan  7 00:27 ..
-rw-------@ 1 bpolania  staff       21 Jan  7 00:27 .gitignore
drwxr-xr-x@ 3 bpolania  staff       96 Jan  7 00:27 evidence
-rw-r--r--@ 1 bpolania  staff  1226255 Jan  7 09:58 poc_v2.tar.gz
-rw-------@ 1 bpolania  staff      345 Jan  7 00:27 PROVENANCE.txt.bak
-rw-r--r--@ 1 bpolania  staff      161 Jan  7 10:37 SHA256SUMS.vendor
+ echo ''

+ echo '--- G.2: Attempt verification (should fail) ---'
--- G.2: Attempt verification (should fail) ---
+ ./scripts/verify_poc_v2.sh
Tarball SHA-256 verified: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
Extracting to: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183324Z/bundle_root
Bundle root: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183324Z/bundle_root/brok-clu-poc_v2-standalone
Verification entrypoint: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183324Z/bundle_root/brok-clu-poc_v2-standalone/scripts/verify.sh
Invoking PoC v2 verification...

Capture directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/verify/run_20260107T183324Z

VERIFICATION PASSED

PoC v2 Standalone Bundle Verification
======================================

Bundle root: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183324Z/bundle_root/brok-clu-poc_v2-standalone

Checking verification files...
Checking manifest files exist...
Verifying SHA256 checksums...
Checking required runtime files...
Checking executables...
Writing verification outputs...

======================================
VERIFICATION PASSED

Files verified: 19
Status: bundles/verified/verify.status.txt
Log:    bundles/verified/verify.log
======================================
+ FAIL_VERIFY_EXIT=0
+ echo 'verify_poc_v2.sh exit code (expected non-zero): 0'
verify_poc_v2.sh exit code (expected non-zero): 0
+ echo ''

+ echo '--- G.3: Attempt run (should be blocked by verification) ---'
--- G.3: Attempt run (should be blocked by verification) ---
+ ./scripts/run_poc_v2.sh --input /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
run_directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183325Z
verification: invoking /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/verify_poc_v2.sh
verification: exit_code=0
execution: running bundle verify to set internal state
execution: run_entrypoint=scripts/run.sh
execution: invoking with input=/Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
execution: exit_code=0
+ FAIL_RUN_EXIT=0
+ echo 'run_poc_v2.sh exit code (expected non-zero): 0'
run_poc_v2.sh exit code (expected non-zero): 0
+ echo ''

+ echo '--- G.4: Check for execution.SKIPPED sentinel ---'
--- G.4: Check for execution.SKIPPED sentinel ---
++ ls -t artifacts/run
++ head -n 1
+ FAILED_RUN=run_20260107T183325Z
+ FAILED_RUN_DIR=/Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183325Z
+ echo 'Failed run directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183325Z'
Failed run directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183325Z
+ ls -la /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183325Z
total 40
drwxr-xr-x@  9 bpolania  staff   288 Jan  7 12:33 .
drwxr-xr-x@ 62 bpolania  staff  1984 Jan  7 12:33 ..
-rw-r--r--@  1 bpolania  staff   508 Jan  7 12:33 DERIVED_VIEW_NOTICE.txt
-rw-r--r--@  1 bpolania  staff   382 Jan  7 12:33 execution.meta.json
-rw-r--r--@  1 bpolania  staff     2 Jan  7 12:33 exit_code.txt
-rw-r--r--@  1 bpolania  staff     0 Jan  7 12:33 stderr.raw.txt
-rw-r--r--@  1 bpolania  staff  1970 Jan  7 12:33 stdout.derived.json
-rw-r--r--@  1 bpolania  staff   593 Jan  7 12:33 stdout.raw.kv
drwxr-xr-x@  5 bpolania  staff   160 Jan  7 12:33 verify
+ echo ''

+ echo '--- G.5: execution.meta.json from failed run ---'
--- G.5: execution.meta.json from failed run ---
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183325Z/execution.meta.json
{
  "run_dir": "/Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T183325Z",
  "created_at_utc": "2026-01-07T18:33:25Z",
  "verification_passed": true,
  "execution_attempted": true,
  "exit_code": 0,
  "stdout_path": "stdout.raw.kv",
  "stderr_path": "stderr.raw.txt",
  "derived_stdout_json_path": "stdout.derived.json",
  "notes": "Execution completed."
}
+ echo ''

+ echo '--- G.6: Restore PROVENANCE.txt ---'
--- G.6: Restore PROVENANCE.txt ---
+ mv vendor/poc_v2/PROVENANCE.txt.bak vendor/poc_v2/PROVENANCE.txt
+ ls -la vendor/poc_v2/
total 2424
drwxr-xr-x@ 7 bpolania  staff      224 Jan  7 12:33 .
drwxr-xr-x@ 3 bpolania  staff       96 Jan  7 00:27 ..
-rw-------@ 1 bpolania  staff       21 Jan  7 00:27 .gitignore
drwxr-xr-x@ 3 bpolania  staff       96 Jan  7 00:27 evidence
-rw-r--r--@ 1 bpolania  staff  1226255 Jan  7 09:58 poc_v2.tar.gz
-rw-------@ 1 bpolania  staff      345 Jan  7 00:27 PROVENANCE.txt
-rw-r--r--@ 1 bpolania  staff      161 Jan  7 10:37 SHA256SUMS.vendor
+ echo ''

+ echo '--- G.7: Verify restoration - run verification again ---'
--- G.7: Verify restoration - run verification again ---
+ ./scripts/verify_poc_v2.sh
Tarball SHA-256 verified: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
Extracting to: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183326Z/bundle_root
Bundle root: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183326Z/bundle_root/brok-clu-poc_v2-standalone
Verification entrypoint: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183326Z/bundle_root/brok-clu-poc_v2-standalone/scripts/verify.sh
Invoking PoC v2 verification...

Capture directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/verify/run_20260107T183326Z

VERIFICATION PASSED

PoC v2 Standalone Bundle Verification
======================================

Bundle root: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T183326Z/bundle_root/brok-clu-poc_v2-standalone

Checking verification files...
Checking manifest files exist...
Verifying SHA256 checksums...
Checking required runtime files...
Checking executables...
Writing verification outputs...

======================================
VERIFICATION PASSED

Files verified: 19
Status: bundles/verified/verify.status.txt
Log:    bundles/verified/verify.log
======================================
+ RESTORED_EXIT=0
+ echo 'verify_poc_v2.sh exit code after restore: 0'
verify_poc_v2.sh exit code after restore: 0
+ echo ''

+ echo ==============================================
==============================================
+ echo 'FINAL STATE'
FINAL STATE
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- Git status ---'
--- Git status ---
+ git status -sb
## main...origin/main
?? evidence/phase_v2_7/
+ echo ''

+ echo '--- Vendor integrity check ---'
--- Vendor integrity check ---
+ shasum -a 256 vendor/poc_v2/poc_v2.tar.gz
7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a  vendor/poc_v2/poc_v2.tar.gz
+ shasum -a 256 vendor/poc_v2/PROVENANCE.txt
51fec5be8eea6fd1c8d689a5646c86b32e016d670ba20f1b70afe68f0c860f67  vendor/poc_v2/PROVENANCE.txt
+ echo ''

+ echo ==============================================
==============================================
+ echo 'PHASE V2-7 VALIDATION COMPLETE'
PHASE V2-7 VALIDATION COMPLETE
+ echo ==============================================
==============================================
++ date -u +%Y-%m-%dT%H:%M:%SZ
+ echo 'Timestamp: 2026-01-07T18:33:27Z'
Timestamp: 2026-01-07T18:33:27Z

==============================================
ADDENDUM: CORRECTED FAILURE HANDLING TEST
==============================================

The following section replaces the original G) test which did not
produce a true verification failure.

+ echo ==============================================
==============================================
+ echo 'PHASE V2-7 FAILURE HANDLING (CORRECTED)'
PHASE V2-7 FAILURE HANDLING (CORRECTED)
+ echo ==============================================
==============================================
+ echo ''

++ date -u +%Y-%m-%dT%H:%M:%SZ
+ echo 'Timestamp: 2026-01-07T18:41:10Z'
Timestamp: 2026-01-07T18:41:10Z
+ echo ''

+ REPO_ROOT=/Users/bpolania/Documents/GitHub/brok-clu-demo
+ cd /Users/bpolania/Documents/GitHub/brok-clu-demo
+ echo ==============================================
==============================================
+ echo 'G.0) BASELINE STATE'
G.0) BASELINE STATE
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- G.0.1: PWD ---'
--- G.0.1: PWD ---
+ pwd
/Users/bpolania/Documents/GitHub/brok-clu-demo
+ echo ''

+ echo '--- G.0.2: Git status ---'
--- G.0.2: Git status ---
+ git status -sb
## main...origin/main
?? evidence/phase_v2_7/
+ echo ''

+ echo '--- G.0.3: Vendor directory listing (baseline) ---'
--- G.0.3: Vendor directory listing (baseline) ---
+ ls -l vendor/poc_v2/
total 2416
drwxr-xr-x@ 3 bpolania  staff       96 Jan  7 00:27 evidence
-rw-r--r--@ 1 bpolania  staff  1226255 Jan  7 09:58 poc_v2.tar.gz
-rw-------@ 1 bpolania  staff      345 Jan  7 00:27 PROVENANCE.txt
-rw-r--r--@ 1 bpolania  staff      161 Jan  7 10:37 SHA256SUMS.vendor
+ echo ''

+ echo '--- G.0.4: Tarball SHA-256 (baseline) ---'
--- G.0.4: Tarball SHA-256 (baseline) ---
+ shasum -a 256 vendor/poc_v2/poc_v2.tar.gz
7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a  vendor/poc_v2/poc_v2.tar.gz
+ echo ''

+ echo '--- G.0.5: Tarball permissions (baseline) ---'
--- G.0.5: Tarball permissions (baseline) ---
+ stat -f '%Lp %N' vendor/poc_v2/poc_v2.tar.gz
644 vendor/poc_v2/poc_v2.tar.gz
+ echo ''

+ echo ==============================================
==============================================
+ echo 'G.1) INDUCE VERIFICATION FAILURE'
G.1) INDUCE VERIFICATION FAILURE
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- G.1.1: Method used: chmod 000 (make tarball unreadable) ---'
--- G.1.1: Method used: chmod 000 (make tarball unreadable) ---
+ echo 'Applying: chmod 000 vendor/poc_v2/poc_v2.tar.gz'
Applying: chmod 000 vendor/poc_v2/poc_v2.tar.gz
+ chmod 000 vendor/poc_v2/poc_v2.tar.gz
+ echo ''

+ echo '--- G.1.2: Confirm permissions changed ---'
--- G.1.2: Confirm permissions changed ---
+ ls -l vendor/poc_v2/poc_v2.tar.gz
----------  1 bpolania  staff  1226255 Jan  7 09:58 vendor/poc_v2/poc_v2.tar.gz
+ stat -f '%Lp %N' vendor/poc_v2/poc_v2.tar.gz
0 vendor/poc_v2/poc_v2.tar.gz
+ echo ''

+ echo ==============================================
==============================================
+ echo 'G.2) ATTEMPT VERIFICATION (SHOULD FAIL)'
G.2) ATTEMPT VERIFICATION (SHOULD FAIL)
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- G.2.1: Run verify_poc_v2.sh ---'
--- G.2.1: Run verify_poc_v2.sh ---
+ ./scripts/verify_poc_v2.sh
shasum: /Users/bpolania/Documents/GitHub/brok-clu-demo/vendor/poc_v2/poc_v2.tar.gz: Permission denied
Expected: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
Actual:   
VERIFICATION FAILED: Tarball SHA-256 mismatch
Capture directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/verify/run_20260107T184110Z
+ VERIFY_EXIT=1
+ echo ''

+ echo 'verify_poc_v2.sh exit code: 1'
verify_poc_v2.sh exit code: 1
+ echo ''

+ echo ==============================================
==============================================
+ echo 'G.3) ATTEMPT RUN (SHOULD BE BLOCKED)'
G.3) ATTEMPT RUN (SHOULD BE BLOCKED)
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- G.3.1: Run run_poc_v2.sh ---'
--- G.3.1: Run run_poc_v2.sh ---
+ ./scripts/run_poc_v2.sh --input /Users/bpolania/Documents/GitHub/brok-clu-demo/examples/inputs/accept_restart_alpha_1.txt
run_directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z
verification: invoking /Users/bpolania/Documents/GitHub/brok-clu-demo/scripts/verify_poc_v2.sh
verification: exit_code=1
execution: SKIPPED (verification failed)
+ RUN_EXIT=1
+ echo ''

+ echo 'run_poc_v2.sh exit code: 1'
run_poc_v2.sh exit code: 1
+ echo ''

+ echo '--- G.3.2: Identify latest run directory ---'
--- G.3.2: Identify latest run directory ---
++ ls -t artifacts/run
++ head -n 1
+ LATEST_RUN=run_20260107T184110Z
+ '[' -n run_20260107T184110Z ']'
+ LATEST_RUN_DIR=/Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z
+ echo 'Latest run directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z'
Latest run directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z
+ echo ''

+ echo '--- G.3.3: Run directory contents ---'
--- G.3.3: Run directory contents ---
+ ls -la /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z
total 8
drwxr-xr-x@  5 bpolania  staff   160 Jan  7 12:41 .
drwxr-xr-x@ 63 bpolania  staff  2016 Jan  7 12:41 ..
-rw-r--r--@  1 bpolania  staff   381 Jan  7 12:41 execution.meta.json
-rw-r--r--@  1 bpolania  staff     0 Jan  7 12:41 execution.SKIPPED
drwxr-xr-x@  5 bpolania  staff   160 Jan  7 12:41 verify
+ echo ''

+ echo '--- G.3.4: Check for execution.meta.json ---'
--- G.3.4: Check for execution.meta.json ---
+ '[' -f /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z/execution.meta.json ']'
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z/execution.meta.json
{
  "run_dir": "/Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z",
  "created_at_utc": "2026-01-07T18:41:10Z",
  "verification_passed": false,
  "execution_attempted": false,
  "exit_code": null,
  "stdout_path": null,
  "stderr_path": null,
  "derived_stdout_json_path": null,
  "notes": "Verification failed (exit 1). Execution not attempted."
}
+ echo ''

+ echo '--- G.3.5: Check for stdout.raw.kv ---'
--- G.3.5: Check for stdout.raw.kv ---
+ '[' -f /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z/stdout.raw.kv ']'
+ echo 'stdout.raw.kv ABSENT (execution blocked - expected)'
stdout.raw.kv ABSENT (execution blocked - expected)
+ echo ''

+ echo '--- G.3.6: Check verify/ subdirectory ---'
--- G.3.6: Check verify/ subdirectory ---
+ '[' -d /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z/verify ']'
+ echo 'verify/ subdirectory contents:'
verify/ subdirectory contents:
+ ls -la /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z/verify/
total 16
drwxr-xr-x@ 5 bpolania  staff  160 Jan  7 12:41 .
drwxr-xr-x@ 5 bpolania  staff  160 Jan  7 12:41 ..
-rw-r--r--@ 1 bpolania  staff    2 Jan  7 12:41 exit_code.txt
-rw-r--r--@ 1 bpolania  staff  338 Jan  7 12:41 stderr.txt
-rw-r--r--@ 1 bpolania  staff    0 Jan  7 12:41 stdout.txt
+ echo ''

+ echo verify/exit_code.txt:
verify/exit_code.txt:
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z/verify/exit_code.txt
1
+ echo ''

+ echo verify/stderr.txt:
verify/stderr.txt:
+ cat /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/run/run_20260107T184110Z/verify/stderr.txt
shasum: /Users/bpolania/Documents/GitHub/brok-clu-demo/vendor/poc_v2/poc_v2.tar.gz: Permission denied
Expected: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
Actual:   
VERIFICATION FAILED: Tarball SHA-256 mismatch
Capture directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/verify/run_20260107T184110Z
+ echo ''

+ echo ==============================================
==============================================
+ echo 'G.4) RESTORE BASELINE'
G.4) RESTORE BASELINE
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- G.4.1: Restore tarball permissions ---'
--- G.4.1: Restore tarball permissions ---
+ chmod 644 vendor/poc_v2/poc_v2.tar.gz
+ echo 'Applied: chmod 644 vendor/poc_v2/poc_v2.tar.gz'
Applied: chmod 644 vendor/poc_v2/poc_v2.tar.gz
+ echo ''

+ echo '--- G.4.2: Confirm permissions restored ---'
--- G.4.2: Confirm permissions restored ---
+ ls -l vendor/poc_v2/poc_v2.tar.gz
-rw-r--r--@ 1 bpolania  staff  1226255 Jan  7 09:58 vendor/poc_v2/poc_v2.tar.gz
+ stat -f '%Lp %N' vendor/poc_v2/poc_v2.tar.gz
644 vendor/poc_v2/poc_v2.tar.gz
+ echo ''

+ echo '--- G.4.3: Verify tarball SHA-256 unchanged ---'
--- G.4.3: Verify tarball SHA-256 unchanged ---
+ shasum -a 256 vendor/poc_v2/poc_v2.tar.gz
7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a  vendor/poc_v2/poc_v2.tar.gz
+ echo ''

+ echo ==============================================
==============================================
+ echo 'G.5) CONFIRM RESTORATION (VERIFY SUCCEEDS)'
G.5) CONFIRM RESTORATION (VERIFY SUCCEEDS)
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- G.5.1: Run verify_poc_v2.sh after restore ---'
--- G.5.1: Run verify_poc_v2.sh after restore ---
+ ./scripts/verify_poc_v2.sh
Tarball SHA-256 verified: 7aa008f23f5fed51cb40c28ac8ec84fe036c3500ff2b9c51da1bb954bb74ed9a
Extracting to: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T184110Z/bundle_root
Bundle root: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T184110Z/bundle_root/brok-clu-poc_v2-standalone
Verification entrypoint: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T184110Z/bundle_root/brok-clu-poc_v2-standalone/scripts/verify.sh
Invoking PoC v2 verification...

Capture directory: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/verify/run_20260107T184110Z

VERIFICATION PASSED

PoC v2 Standalone Bundle Verification
======================================

Bundle root: /Users/bpolania/Documents/GitHub/brok-clu-demo/artifacts/poc_v2_extracted/run_20260107T184110Z/bundle_root/brok-clu-poc_v2-standalone

Checking verification files...
Checking manifest files exist...
Verifying SHA256 checksums...
Checking required runtime files...
Checking executables...
Writing verification outputs...

======================================
VERIFICATION PASSED

Files verified: 19
Status: bundles/verified/verify.status.txt
Log:    bundles/verified/verify.log
======================================
+ RESTORED_VERIFY_EXIT=0
+ echo ''

+ echo 'verify_poc_v2.sh exit code after restore: 0'
verify_poc_v2.sh exit code after restore: 0
+ echo ''

+ echo ==============================================
==============================================
+ echo 'G.6) FINAL STATE'
G.6) FINAL STATE
+ echo ==============================================
==============================================
+ echo ''

+ echo '--- G.6.1: Git status ---'
--- G.6.1: Git status ---
+ git status -sb
## main...origin/main
?? evidence/phase_v2_7/
+ echo ''

+ echo '--- G.6.2: Vendor directory listing (final) ---'
--- G.6.2: Vendor directory listing (final) ---
+ ls -l vendor/poc_v2/
total 2416
drwxr-xr-x@ 3 bpolania  staff       96 Jan  7 00:27 evidence
-rw-r--r--@ 1 bpolania  staff  1226255 Jan  7 09:58 poc_v2.tar.gz
-rw-------@ 1 bpolania  staff      345 Jan  7 00:27 PROVENANCE.txt
-rw-r--r--@ 1 bpolania  staff      161 Jan  7 10:37 SHA256SUMS.vendor
+ echo ''

+ echo ==============================================
==============================================
+ echo 'G.7) FAILURE TEST SUMMARY'
G.7) FAILURE TEST SUMMARY
+ echo ==============================================
==============================================
+ echo ''

+ echo 'Failure-induction method: chmod 000 vendor/poc_v2/poc_v2.tar.gz'
Failure-induction method: chmod 000 vendor/poc_v2/poc_v2.tar.gz
+ echo 'verify_poc_v2.sh exit code (with failure): 1'
verify_poc_v2.sh exit code (with failure): 1
+ echo 'run_poc_v2.sh exit code (blocked): 1'
run_poc_v2.sh exit code (blocked): 1
+ echo 'verify_poc_v2.sh exit code (after restore): 0'
verify_poc_v2.sh exit code (after restore): 0
+ echo ''

+ '[' 1 -ne 0 ']'
+ '[' 1 -ne 0 ']'
+ '[' 0 -eq 0 ']'
+ echo 'RESULT: PASS - Verification failure induced, execution blocked, restoration successful'
RESULT: PASS - Verification failure induced, execution blocked, restoration successful
+ echo ''

+ echo ==============================================
==============================================
+ echo 'PHASE V2-7 FAILURE HANDLING COMPLETE'
PHASE V2-7 FAILURE HANDLING COMPLETE
+ echo ==============================================
==============================================
++ date -u +%Y-%m-%dT%H:%M:%SZ
+ echo 'Timestamp: 2026-01-07T18:41:11Z'
Timestamp: 2026-01-07T18:41:11Z
